stageResults = [:]

pipeline{
    agent any
    stages{
        stage('Stage 1'){
            steps{
                script{
                    try{
                        echo "Stage Name : ${env.STAGE_NAME}"
                        stageResults."${env.STAGE_NAME}" = "SUCCESS"
                    }
                    catch(Exception e){
                        // stageResults.env.STAGE_NAME = "UNSTABLE"
                    }
                }
            }
        }
        stage('Stage 2'){
            steps{
                script{
                    try{
                        error "Error"
                        echo "Stage Name : ${env.STAGE_NAME}"
                        stageResults."${env.STAGE_NAME}" = "SUCCESS"
                    }
                    catch(Exception e){
                        stageResults."${env.STAGE_NAME}" = "UNSTABLE"
                    }
                }
            }
        }
    }
    post {
        always {
            script{
                echo "All stage details: ${stageResults.keySet()}"
                for(element in stageResults){
                    echo "${element.key} ${element.value}"
                }
            }
        }
    }
}